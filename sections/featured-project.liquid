{%- if section.settings.fullwidth -%}
	{%- assign container = 'container-full' -%}
{%- elsif section.settings.max_width != blank -%}
	{%- assign container = 'kretoss-container' -%}
{%- else -%}
	{%- assign container = 'page-width' -%}
{%- endif -%}

{%- assign max_width = '' -%}
{%- if section.settings.fullwidth == blank and section.settings.max_width != blank -%}
	{%- assign width_container = section.settings.max_width | plus: 0 -%}
	{%- capture max_width -%}style="max-width: {{ section.settings.max_width }};"{%- endcapture -%}
{%- endif -%}

{% assign margin 	= section.settings.margin | split: "|" %}
{% assign padding 	= section.settings.padding | split: "|" %}
{%- style -%}
  {%- if margin[0] != blank or padding[0] != blank -%}
		#shopify-section-{{ section.id }} .section-featured-project{
			{%- if margin[0] != blank -%}margin: {{ margin[0] }};{%- endif -%}
			{%- if padding[0] != blank -%}padding:{{ padding[0] }};{%- endif -%}
		}
	{%- endif -%}
	{%- if margin[1] != blank or padding[1] != blank -%}
		@media (max-width:1200px){
			#shopify-section-{{ section.id }} .section-featured-project{
				{%- if margin[1] != blank -%}margin: {{ margin[1] }};{%- endif -%}
				{%- if padding[1] != blank -%}padding:{{ padding[1] }};{%- endif -%}
			}
		}
	{%- endif -%}
	{%- if margin[2] != blank or padding[2] != blank -%}
		@media (max-width:991px){
			#shopify-section-{{ section.id }} .section-featured-project{
				{%- if margin[2] != blank -%}margin: {{ margin[2] }};{%- endif -%}
				{%- if padding[2] != blank -%}padding:{{ padding[2] }};{%- endif -%}
			}
		}
	{%- endif -%}
	{%- if margin[3] != blank or padding[3] != blank -%}
		@media (max-width:767px){
			#shopify-section-{{ section.id }} .section-featured-project{
				{%- if margin[3] != blank -%}margin: {{ margin[3] }};{%- endif -%}
				{%- if padding[3] != blank -%}padding:{{ padding[3] }};{%- endif -%}
			}
		}
	{%- endif -%}
    

{%- endstyle -%}
{% assign project_product = all_products[section.settings.project_product] %}

<div class="kretoss-section section-featured-project">
	<div class="{{ container }}" {{ max_width }}>
        <div class="section_heading">
            <h2 class="h2_title">
                Our first<span class="border_text"><img src="https://cdn.shopify.com/s/files/1/0962/3794/5196/files/title_round.svg?v=1766058214">project</span>
            </h2>
        </div>
        <div class="featured_project_container">
            <div class="p_left_content">
                <h3 class="project_title">
                    {{ project_product.title }}
                </h3>
                <div class="project_data_container">
                    <div class="project_data_counter">

                        {% assign current_backers = 0 %}

                        {% for variant in project_product.variants %}
                            {% assign variant_current = variant.metafields.custom.current_reached_tier_goal | default: 0 %}
                            {% assign current_backers = current_backers | plus: variant_current %}
                        {% endfor %}

                        {% assign raised_amount = project_product.metafields.custom.raised_amount | default: 0 %}
                        {% assign goal_amount = project_product.metafields.custom.project_goal | default: 1 %}

                        {% assign progress = raised_amount | times: 100.0 | divided_by: goal_amount %}
                        {% assign progress = progress | round: 2 %}
                        {% if progress > 100 %}
                        {% assign progress = 100 %}
                        {% endif %}
                        {% assign bar_width = progress %}
                        {% if bar_width < 2 %}
                        {% assign bar_width = 2 %}
                        {% endif %}

                        <div class="raised_goal">
                            ₹ {{ raised_amount | times: 100 | money_without_currency }}
                            <span>
                                Raise of ₹ {{ goal_amount | times: 100 | money_without_currency }} goal
                            </span>
                        </div>


                        <div class="raised_progress_bar">
                            <div class="progress_track">
                                <div class="progress_fill" style="width: {{ bar_width }}%;"> </div>
                            </div>
                            <div class="progress_labels">
                                <span>{{ progress }}% funded</span>
                            </div>
                        </div>

                        <div class="raised_counters_data">
                            <div class="count_data">
                                <h5>{{ current_backers }}</h5>
                                <p>Backer</p>
                            </div>
                            <div class="count_data">
                                <h5>13</h5>
                                <p>Days to go</p>
                            </div>
                            <div class="count_data">
                                <h5>13</h5>
                                <p>Days to go</p>
                            </div>
                        </div>
                    </div>
                    <div class="project_information">
                        <div class="info_points">
                            {% if project_product.metafields.custom.project_info_points %}
                                {% for point in project_product.metafields.custom.project_info_points.value %}
                                <div class="info_li">
                                    <img src="https://cdn.shopify.com/s/files/1/0962/3794/5196/files/askrisk_blue.svg?v=1766058821">
                                    <p>{{ point }}</p>
                                </div>
                                {% endfor %}
                            {% endif %}
                        </div>
                    </div>
                </div>
                <a href="{{ project_product.url }}" class="go_btn theme_btn">View Project</a>
            </div>
            <div class="p_right_image">
                <img src="https://cdn.shopify.com/s/files/1/0962/3794/5196/files/clog_img.png?v=1766058482">
            </div>
        </div>
	</div>
</div>
{% schema %}
{
  "name": "Featured Project",
  "settings": [
    {
      "type": "header",
      "content": "Layout settings"
    },
    {
      "type": "text",
      "id": "max_width",
      "label": "Width container",
      "info": "Default: 1296px"
    },
    {
      "type": "checkbox",
      "id": "fullwidth",
      "label": "Fullwidth"
    },
    {
        "type": "product",
        "id": "project_product",
        "label": "Select Project Product"
    },
    {
      "type": "text",
      "id": "padding",
      "label": "Padding",
      "placeholder": "0px 0px 0px 0px",
      "info":"Screen: desktop | 1200px | 991px | 767px"
    },
    {
      "type": "text",
      "id": "margin",
      "label": "Margin",
      "placeholder": "0px 0px 0px 0px",
      "info":"Screen: desktop | 1200px | 991px | 767px"
    }
  ],
	"presets": [
		{
			"name": "Featured Project"
		}
    ]
}
{% endschema %}