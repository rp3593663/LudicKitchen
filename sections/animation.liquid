{%- if section.settings.fullwidth -%}
	{%- assign container = 'container-full' -%}
{%- elsif section.settings.max_width != blank -%}
	{%- assign container = 'kretoss-container' -%}
{%- else -%}
	{%- assign container = 'page-width' -%}
{%- endif -%}

{%- assign max_width = '' -%}
{%- if section.settings.fullwidth == blank and section.settings.max_width != blank -%}
	{%- assign width_container = section.settings.max_width | plus: 0 -%}
	{%- capture max_width -%}style="max-width: {{ section.settings.max_width }};"{%- endcapture -%}
{%- endif -%}

{% assign margin 	= section.settings.margin | split: "|" %}
{% assign padding 	= section.settings.padding | split: "|" %}
{%- style -%}
  {%- if margin[0] != blank or padding[0] != blank -%}
		#shopify-section-{{ section.id }} .section-home-animation{
			{%- if margin[0] != blank -%}margin: {{ margin[0] }};{%- endif -%}
			{%- if padding[0] != blank -%}padding:{{ padding[0] }};{%- endif -%}
		}
	{%- endif -%}
	{%- if margin[1] != blank or padding[1] != blank -%}
		@media (max-width:1200px){
			#shopify-section-{{ section.id }} .section-home-animation{
				{%- if margin[1] != blank -%}margin: {{ margin[1] }};{%- endif -%}
				{%- if padding[1] != blank -%}padding:{{ padding[1] }};{%- endif -%}
			}
		}
	{%- endif -%}
	{%- if margin[2] != blank or padding[2] != blank -%}
		@media (max-width:991px){
			#shopify-section-{{ section.id }} .section-home-animation{
				{%- if margin[2] != blank -%}margin: {{ margin[2] }};{%- endif -%}
				{%- if padding[2] != blank -%}padding:{{ padding[2] }};{%- endif -%}
			}
		}
	{%- endif -%}
	{%- if margin[3] != blank or padding[3] != blank -%}
		@media (max-width:767px){
			#shopify-section-{{ section.id }} .section-home-animation{
				{%- if margin[3] != blank -%}margin: {{ margin[3] }};{%- endif -%}
				{%- if padding[3] != blank -%}padding:{{ padding[3] }};{%- endif -%}
			}
		}
	{%- endif -%}
   .horizontal-section {
      position: relative;
      height: auto;
      overflow: hidden;
    }

    .horizontal-wrapper {
      position: sticky;
      top: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }


    .horizontal-title {
        white-space: nowrap;
        font-weight: 700;
        font-size: 96px;
        line-height: 96px;
        letter-spacing: -4.8px;
        color: var(--primary_color);
    }

    .horizontal-desc {
      position: absolute;
      bottom: 15%;
      left: 10%;
      max-width: 420px;
      font-size: 16px;
      line-height: 1.6;
    }
{%- endstyle -%}
<div class="kretoss-section section-home-animation">
	<div class="{{ container }}" {{ max_width }}>
        <div class="horizontal-section">
            <div class="horizontal-wrapper">
                <h2 class="horizontal-title">
                    It's yours, curation to creation.
                </h2>
                <p class="horizontal-desc">
                    Control, contribute, create - right from the first move to last output, we'll match your cue.
                </p>
            </div>
        </div>
	</div>
</div>
<script>
gsap.registerPlugin(ScrollTrigger, SplitText);

document.fonts.ready.then(() => {

  const section = document.querySelector(".horizontal-section");
  const wrapper = document.querySelector(".horizontal-wrapper");
  const title   = document.querySelector(".horizontal-title");

  const split = new SplitText(title, { type: "chars" });

  // Start text just outside viewport
  gsap.set(title, {
    xPercent: 100
  });

  const horizontalTween = gsap.to(title, {
    xPercent: -100,
    ease: "none",
    scrollTrigger: {
      trigger: section,
      start: "top top",       // âœ… IMMEDIATE START
      end: "bottom top",      // uses section height
      scrub: true,
      pin: wrapper,
      anticipatePin: 1
    }
  });

  // Optional per-letter float (can remove if you want exact truus)
  split.chars.forEach(char => {
    gsap.from(char, {
      yPercent: (Math.random() - 0.5) * 500,
      rotation: (Math.random() - 0.5) * 60,
      ease: "elastic.out(1.2, 1)",
      scrollTrigger: {
        trigger: char,
        containerAnimation: horizontalTween,
        start: "left 80%",
        end: "left 20%",
        scrub: true
      }
    });
  });

});
</script>

{% schema %}
{
  "name": "Home Animation",
  "settings": [
    {
      "type": "header",
      "content": "Layout settings"
    },
    {
      "type": "text",
      "id": "max_width",
      "label": "Width container",
      "info": "Default: 1296px"
    },
    {
      "type": "checkbox",
      "id": "fullwidth",
      "label": "Fullwidth"
    },
    {
      "type": "text",
      "id": "padding",
      "label": "Padding",
      "placeholder": "0px 0px 0px 0px",
      "info":"Screen: desktop | 1200px | 991px | 767px"
    },
    {
      "type": "text",
      "id": "margin",
      "label": "Margin",
      "placeholder": "0px 0px 0px 0px",
      "info":"Screen: desktop | 1200px | 991px | 767px"
    }
  ],
	"presets": [
		{
			"name": "Home Animation"
		}
    ]
}
{% endschema %}